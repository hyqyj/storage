import socket
import sys
import time
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
HOST = '127.0.0.1'
PROT = 7890
try:
	s.connect((HOST, PROT))
	print("连接成功")
except KeyboardInterrupt as f:
	print("连接失败")

message_1 = b'CONNECT www.instagram.com:443 HTTP/1.1\r\nHost: www.instagram.com:443\r\nProxy-Connection: keep-alive\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 Edg/114.0.1823.82\r\n\r\n'
message_2 = b'\x16\x03\x01\x02\x00\x01\x00\x01\xfc\x03\x03\x9b\xa1\xfc\xd5\xc1S\xc9_\x99\xf7\x1dh\xbcg\xe7\xa0.\xc8i\xdb\x96\x07<=+\xbd1\xec\x192/\x9f \x11*F[\xd7\\\xbe\x81\x1c.\xa8\x95\x82\x8e\x03\x15\xdf\xe2\xa2\x06h[\xc69\xfa\xe0\x05$\xb0#^\xd8\x00 \xaa\xaa\x13\x01\x13\x02\x13\x03\xc0+\xc0/\xc0,\xc00\xcc\xa9\xcc\xa8\xc0\x13\xc0\x14\x00\x9c\x00\x9d\x00/\x005\x01\x00\x01\x93ZZ\x00\x00Di\x00\x05\x00\x03\x02h2\x00#\x00\x00\x00\x10\x00\x0e\x00\x0c\x02h2\x08http/1.1\x00\x1b\x00\x03\x02\x00\x02\x00\x12\x00\x00\x00\r\x00\x14\x00\x12\x04\x03\x08\x04\x04\x01\x05\x03\x08\x05\x05\x01\x08\x06\x06\x01\x02\x01\x00\n\x00\n\x00\x08\xca\xca\x00\x1d\x00\x17\x00\x18\x00\x17\x00\x00\x00+\x00\x07\x06\x1a\x1a\x03\x04\x03\x03\xff\x01\x00\x01\x00\x00\x0b\x00\x02\x01\x00\x00-\x00\x02\x01\x01\x00\x05\x00\x05\x01\x00\x00\x00\x00\x003\x00+\x00)\xca\xca\x00\x01\x00\x00\x1d\x00 ^\xb6\x8d \xde*\x00\x83\x1e\xa8,c|\xc2\xfd\x86\x04x\xb5}\xd2u\x95\x87Ef3\x1am\x98H`\x00\x00\x00\x12\x00\x10\x00\x00\rwww.baidu.com\x9a\x9a\x00\x01\x00\x00\x15\x00\xc8\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
message_3 = b'GET / HTTP/1.1\r\nHost: www.instagram.com:443\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 Edg/114.0.1823.79\r\n\r\n'
s.send(message_1)
print(s.recv(1024))
s.send(message_2)
print(s.recv(1024))
print(s.recv(8192))
s.send(message_3)
print(s.recv(1024))
print(s.recv(1024))
# while True:
# 	if len(s.recv(8192)) > 0:
# 		print(s.recv(8192))
# 		break
# 	else:
# 		time.sleep(0.2)
